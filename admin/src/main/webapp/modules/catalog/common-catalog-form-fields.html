<div class="row">
    <div class="col-md-1 text-right col-md-push-11">
        <button type="button" class="btn btn-default" ng-click="catalogEntryCtrl.leaveEditView()"><i
                class="glyphicon glyphicon-remove" title="Go back to items list"></i></button>
    </div>
    <div class="col-md-11 col-md-pull-1 text-center" ng-show="catalogEntryCtrl.isEditionModeActive">
        <h4>Edition of item #{{catalogEntryCtrl.entry.id}} from {{catalogEntriesCtrl.resourceType}}</h4>
    </div>
    <div class="col-md-11 col-md-pull-1 text-center" ng-show="catalogEntryCtrl.isCreationModeActive">
        <h4>Add new {{catalogEntriesCtrl.resourceType}} item</h4>
    </div>
</div>
<div class="row">
    <div class="col-md-12 text-center">
        <span>
            <alert ng-repeat="alert in catalogEntryCtrl.alerts" type="{{alert.type}}"
                   close="catalogEntryCtrl.closeAlert($index)">{{alert.msg}}
            </alert>
        </span>
    </div>
</div>

<div class="row">
    <div class="form-group col-md-12">
        <label>Computed visibility:</label>&nbsp;
        <span ng-show="catalogEntryCtrl.entry.visible" style="color:green">visible</span>
        <span ng-hide="catalogEntryCtrl.entry.visible" style="color:red">not visible</span>

        <p class="help-block">Only visible items are available in store</p>
    </div>
</div>

<div class="checkbox">
    <label><input type="checkbox" ng-model="catalogEntryCtrl.entry.disabled"/>Disabled</label>
    <p class="help-block">Check to prevent this item to appear in store</p>
</div>

<div class="row">

    <div class="form-group col-md-6">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" ng-model="catalogEntryCtrl.entry.name" required="true"
               placeholder="Name..." maxlength="50"/>
    </div>

    <div class="form-group col-md-6">
        <label for="name">Description</label>
        <textarea class="form-control" id="description" ng-model="catalogEntryCtrl.entry.description"
                  placeholder="Description..." rows="2" maxlength="255"></textarea>
    </div>
</div>

<div class="row">
    <div class="col-md-6" ng-controller="DatepickerDemoCtrl">
        <label for="startDate">Start Date</label>

        <p class="input-group">
            <input type="text" id="startDate" class="form-control" datepicker-popup
                   ng-model="catalogEntryCtrl.entry.startDate" is-open="opened" datepicker-options="dateOptions" close-text="Close"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event)"><i
                        class="glyphicon glyphicon-calendar"></i></button>
              </span>
        </p>
    </div>

    <div class="col-md-6" ng-controller="DatepickerDemoCtrl">
        <label for="startDate">End Date</label>

        <p class="input-group">
            <input type="text" id="endDate" class="form-control" datepicker-popup
                   ng-model="catalogEntryCtrl.entry.endDate" is-open="opened" datepicker-options="dateOptions" close-text="Close"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event)"><i
                        class="glyphicon glyphicon-calendar"></i></button>
              </span>
        </p>
    </div>
</div>

<div class="row">
    <div class="col-md-6" ng-controller="PresentationsController as presCtrl">

        <script type="text/ng-template" id="addOrEditPresentation.html">
            <div class="modal-header">
                <h3 class="modal-title" ng-show = "isEditionMode()">Edit presentation for locale: <i>{{locale}}</i></h3>
                <h3 class="modal-title" ng-show = "!isEditionMode()">Add new presentation</h3>
            </div>

            <div class="modal-body">
                <form name="presentationForm"
                      ng-submit="presentationForm.$valid && addOrEditPresentation()" novalidate>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label>Select a locale</label>
                            <select class="form-control" ng-model="$parent.selectedLocale" ng-change="selectLocale()" name="selectedLocale" ng-options="a.name as a.displayName for a in availableLocales">
                            </select>
                        </div>
                    </div>
                    <div class="row" ng-show="isLocaleSelected()">
                        <div class="form-group col-md-6" >
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="presDisplayName" ng-model="presentation.displayName" required="true"
                                   placeholder="Name..." maxlength="50"/>
                        </div>

                    </div>
                    <div class="row" ng-show="isLocaleSelected()">
                        <div class="form-group col-md-6">
                            <label for="name">Short description</label>
                            <textarea class="form-control" id="presShortDescription" ng-model="presentation.shortDescription"
                                      placeholder="Description..." rows="2" maxlength="2000"></textarea>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="name">Long description</label>
                            <textarea class="form-control" id="presDescription" ng-model="presentation.description"
                                      placeholder="Description..." rows="4" maxlength="10000"></textarea>
                        </div>
                    </div>
                    <div class="row" ng-show="isLocaleSelected()">
                        <div class="form-group col-md-6">
                            <label for="thumbnail">Thumbnail</label>
                            <input type="file" id="thumbnail" ng-file-select="onFileSelect($files)">
                            <p class="help-block">Select a thumbnail image</p>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="smallImage">Small image</label>
                            <input type="file" id="smallImage" ng-file-select="onFileSelect($files)">
                            <p class="help-block">Select a small image</p>
                        </div>
                    </div>
                    <div class="row" ng-show="isLocaleSelected()">
                        <div class="form-group col-md-6">
                            <label for="largeImage">Large image</label>
                            <input type="file" id="largeImage" ng-file-select="onFileSelect($files)">
                            <p class="help-block">Select a large image</p>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="video">Video</label>
                            <input type="file" id="video" ng-file-select="onFileSelect($files)">
                            <p class="help-block">Select a video</p>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="save()"  ng-show="isEditionMode()">Save</button>
                <button class="btn btn-primary" ng-click="add()"  ng-show="!isEditionMode() && isLocaleSelected()">Add</button>
                <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
            </div>
        </script>

        <accordion close-others="oneAtATime" ng-show="catalogEntryCtrl.isEditionModeActive">
            <accordion-group is-open="accordion.open">
                <accordion-heading>
                    <span style="cursor:pointer">Presentations per locale</span> <i style="cursor:pointer" class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': accordion.open, 'glyphicon-chevron-right': !accordion.open}"></i>
                </accordion-heading>

                <div class="text-right">
                    <button type="button" class="btn btn-default" ng-click="addOrEditPresentation('lg')"><i class="glyphicon glyphicon-plus" ></i>
                    </button>
                </div>

                <table class="table table-striped table-hover table-condensed text-left">
                    <thead>
                    <tr>
                        <th>Locale</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="locale in locales">
                        <td style="width:90%;cursor:pointer"  ng-click="addOrEditPresentation('lg', locale)" style="cursor:pointer">{{locale}}</td>
                        <td class="text-right">
                            <a ng-click="removeItem($index, 'This will delete presentation for locale '+locale)" href="#" class="glyphicon glyphicon-trash"/>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </accordion-group>
        </accordion>
    </div>
</div>
</div>